<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Məlumatı Analizi və Qiymət Planları</title>
    <!-- Tailwind CSS və Inter fontunu yükləyin -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8faff;
        }
        .card-shadow { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        
        /* Xüsusi Gradient Düymələr */
        .premium-button-1 {
            background-image: linear-gradient(to right, #4338ca, #3b82f6);
            transition: all 0.3s ease;
        }
        .premium-button-1:hover { background-image: linear-gradient(to right, #3730a3, #2563eb); }
        .premium-button-2 {
            background-image: linear-gradient(to right, #9333ea, #c026d3);
            transition: all 0.3s ease;
        }
        .premium-button-2:hover { background-image: linear-gradient(to right, #7e22ce, #a21caf); }

        .plan-feature-list li { padding-bottom: 0.5rem; }
        
        /* Nəticə blokları üçün xüsusi stil */
        .result-block {
            border-left: 4px solid #3b82f6; /* Mavi rəng */
            background-color: #eff6ff; /* Açıq mavi fon */
        }
    </style>
</head>

<body class="p-4 md:p-8 min-h-screen flex items-center justify-center">

    <div class="w-full max-w-6xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-2">
                Video Məlumatı Analizi Platforması
            </h1>
            <p class="text-xl text-gray-500 max-w-2xl mx-auto">
                Bir link daxil edin və bütün məlumatları çıxarın. Plan seçiminizi sınaqdan keçirin!
            </p>
        </header>

        <!-- İstifadəçi Paneli Simulyasiyası -->
        <div class="bg-white p-6 rounded-xl card-shadow mb-8 border border-blue-100">
            <h2 class="text-2xl font-bold mb-3 text-blue-600">
                <i class="fas fa-user-circle mr-2"></i> İstifadəçi Profili Simulyasiyası
            </h2>
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                <div>
                    <p class="text-gray-700">Email: <span id="user-email" class="font-medium text-gray-900">user@example.com</span></p>
                    <p class="text-gray-700">Cari Plan: <span id="current-plan-display" class="font-bold text-blue-800">Təməl</span></p>
                    <p class="text-gray-700">Abunəlik Statusu: <span id="subscription-status" class="font-bold text-red-500">Qeyri-aktiv</span></p>
                </div>
                <div id="loading-spinner-plan" class="hidden text-blue-500 mt-4 md:mt-0">
                     <i class="fas fa-spinner fa-spin fa-2x"></i>
                </div>
            </div>
             <div id="subscribe-message" class="mt-4 p-3 rounded-lg hidden font-semibold"></div>
        </div>
        
        <!-- Video Analizi Bölməsi -->
        <div class="bg-white p-6 rounded-xl card-shadow mb-8 border border-indigo-200">
            <h2 class="text-2xl font-bold text-indigo-700 mb-4 flex items-center">
                <i class="fas fa-search mr-3"></i> Link Analizi
            </h2>
            <div class="flex flex-col md:flex-row gap-4">
                <input type="url" id="link-url" placeholder="Video Linkini Daxil Edin (məsələn: youtube.com/watch?v=...) " 
                       value="https://www.youtube.com/watch?v=AZ-texnologiya-gələcəyi"
                       class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <button onclick="handleLinkSearch()" 
                        class="px-6 py-3 rounded-xl font-bold text-white bg-indigo-600 hover:bg-indigo-700 transition duration-150 transform hover:scale-[1.01]">
                    <i class="fas fa-video mr-2"></i> Məlumatı Çıxar / Analiz Et
                </button>
            </div>
            
            <p id="search-message" class="mt-4 text-center font-medium h-6"></p>

            <!-- Nəticələr Ekranı -->
            <div id="extraction-results" class="mt-6 p-4 rounded-xl result-block hidden">
                <h3 class="text-xl font-bold text-indigo-700 mb-4 flex items-center">
                    <i class="fas fa-list-ul mr-2"></i> Çıxarılmış Nəticələr 
                    <span id="plan-warning" class="ml-4 px-3 py-1 bg-yellow-400 text-yellow-900 text-sm font-semibold rounded-full hidden"></span>
                </h3>
                <div id="results-content" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
                    <!-- Nəticələr buraya dinamik əlavə ediləcək -->
                </div>
            </div>
        </div>


        <!-- Qiymət Planları -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            
            <!-- Təməl (Basic) Plan -->
            <div id="plan-Təməl" class="bg-white p-6 md:p-8 rounded-xl card-shadow border border-gray-200">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Təməl</h3>
                    <p class="text-4xl font-extrabold text-gray-900 mt-2 mb-1">
                        $0<span class="text-xl font-normal text-gray-500">/ay</span>
                    </p>
                    <p class="text-sm text-gray-500">Ödənişsiz, həmişəlik.</p>
                </div>
                
                <ul class="text-left text-gray-600 mb-8 plan-feature-list">
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> 10 video sorğusu/ay</li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> <span class="font-bold">Əsas Məlumatlar</span> çıxarılır</li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> Standard dəstək</li>
                    <li><i class="fas fa-times-circle text-red-500 mr-2"></i> Qabaqcıl analitika yoxdur</li>
                </ul>

                <button id="button-Təməl" data-plan="Təməl" 
                        class="w-full py-3 rounded-xl font-bold text-white transition duration-200 cursor-pointer"
                        onclick="handlePlanSelection('Təməl')">
                    Mövcud Plan
                </button>
            </div>

            <!-- Premium Plan -->
            <div id="plan-Premium" class="bg-white p-6 md:p-8 rounded-xl card-shadow border-4 border-blue-500 transform scale-105">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-blue-600">Premium</h3>
                    <p class="text-4xl font-extrabold text-gray-900 mt-2 mb-1">
                        $19<span class="text-xl font-normal text-gray-500">/ay</span>
                    </p>
                    <p class="text-sm text-gray-500">Fərdi istifadəçilər və kiçik komandalar üçün.</p>
                </div>
                
                <ul class="text-left text-gray-600 mb-8 plan-feature-list">
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> <span class="font-bold text-blue-600">100 video sorğusu/ay</span></li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> Ətraflı Məlumat Çıxarılması</li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> <span class="font-bold">Transkript və Təhlil</span></li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> Prioritet dəstək</li>
                </ul>

                <button id="button-Premium" data-plan="Premium" 
                        class="w-full py-3 rounded-xl font-bold text-white premium-button-1 shadow-lg shadow-blue-500/50"
                        onclick="handlePlanSelection('Premium')">
                    Yüksəlt
                </button>
            </div>

            <!-- Pro Plan -->
            <div id="plan-Pro" class="bg-white p-6 md:p-8 rounded-xl card-shadow border border-gray-200">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Pro</h3>
                    <p class="text-4xl font-extrabold text-gray-900 mt-2 mb-1">
                        $49<span class="text-xl font-normal text-gray-500">/ay</span>
                    </p>
                    <p class="text-sm text-gray-500">Bizneslər və yüksək həcmli tələblər üçün.</p>
                </div>
                
                <ul class="text-left text-gray-600 mb-8 plan-feature-list">
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> <span class="font-bold text-purple-600">Limitsiz Sorğu</span></li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> Bütün Məlumat Çıxarılması Modulları</li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> <span class="font-bold">Rəqib Analizi və API</span></li>
                    <li><i class="fas fa-check-circle text-green-500 mr-2"></i> 24/7 Xüsusi Dəstək</li>
                </ul>

                <button id="button-Pro" data-plan="Pro" 
                        class="w-full py-3 rounded-xl font-bold text-white premium-button-2 shadow-lg shadow-purple-500/50"
                        onclick="handlePlanSelection('Pro')">
                    Yüksəlt
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        // Simulyasiya üçün ilkin dəyərlər
        let currentPlan = localStorage.getItem('currentPlan') || 'Təməl';
        
        // Elementləri əldə et
        const planDisplayEl = document.getElementById('current-plan-display');
        const statusDisplayEl = document.getElementById('subscription-status');
        const subscribeMessageEl = document.getElementById('subscribe-message');
        const searchMessageEl = document.getElementById('search-message');
        const resultsEl = document.getElementById('extraction-results');
        const resultsContentEl = document.getElementById('results-content');
        const planWarningEl = document.getElementById('plan-warning');
        const loadingSpinnerPlan = document.getElementById('loading-spinner-plan');
        const planCards = {
            'Təməl': document.getElementById('plan-Təməl'),
            'Premium': document.getElementById('plan-Premium'),
            'Pro': document.getElementById('plan-Pro')
        };
        const planButtons = {
            'Təməl': document.getElementById('button-Təməl'),
            'Premium': document.getElementById('button-Premium'),
            'Pro': document.getElementById('button-Pro')
        };

        // Köməkçi funksiya: İstifadəçi mesajlarını göstərmək
        function displayMessage(element, message, isError = false) {
            element.textContent = message;
            element.classList.remove('hidden', 'bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800');
            element.classList.add(isError ? 'bg-red-100' : 'bg-green-100', isError ? 'text-red-800' : 'text-green-800');
            element.classList.remove('h-6'); // Mesaj göstəriləndə hündürlüyü tənzimlə
            
            if (element === searchMessageEl) {
                setTimeout(() => element.textContent = '', 5000);
            } else {
                 setTimeout(() => element.classList.add('hidden'), 5000);
            }
        }

        // Plan səviyyəsini təyin edən köməkçi funksiya
        const getPlanLevel = (planName) => {
            switch (planName) {
                case 'Təməl': return 0;
                case 'Premium': return 1;
                case 'Pro': return 2;
                default: return -1;
            }
        }

        // UI yeniləmə funksiyası (Visual Update)
        function updateUI(email, subscribed, planName) {
            planDisplayEl.textContent = planName;
            statusDisplayEl.textContent = subscribed ? 'Aktiv' : 'Qeyri-aktiv';
            statusDisplayEl.className = 'font-bold ' + (subscribed ? 'text-green-600' : 'text-red-500');

            // Bütün kartları sıfırla
            Object.values(planCards).forEach(card => card.classList.remove('border-4', 'border-blue-500', 'transform', 'scale-105'));
            
            // Premium kartı üçün xüsusi stil
            planCards['Premium'].classList.add('transform', 'scale-105');
            
            // Mövcud planın kartını vurğula
            planCards[planName].classList.add('border-4', planName === 'Təməl' ? 'border-gray-500' : 'border-blue-500');
            
            // Düymələri yenilə
            Object.keys(planButtons).forEach(pName => {
                const button = planButtons[pName];
                button.disabled = false;
                
                // Bütün düymələrdən xüsusi stilləri çıxar
                button.classList.remove('bg-gray-200', 'text-gray-500', 'cursor-not-allowed', 'premium-button-1', 'premium-button-2', 'bg-red-600', 'hover:bg-red-700', 'text-white');
                
                if (pName === planName) {
                    // Mövcud plan
                    button.textContent = 'Mövcud Plan';
                    button.disabled = true;
                    button.classList.add('bg-gray-200', 'text-gray-500', 'cursor-not-allowed');
                } else if (pName === 'Təməl') {
                    // Ləğvetmə (Endirmə)
                    if (getPlanLevel(planName) > getPlanLevel('Təməl')) {
                         button.textContent = 'Qeydiyyatı Ləğv Et';
                         button.classList.add('bg-red-600', 'hover:bg-red-700', 'text-white');
                    } else {
                        // Təməl mövcud olanda Təməli endirə bilməzsən
                        button.textContent = 'Təməl Plan'; 
                        button.classList.add('bg-gray-500', 'text-white');
                    }
                } else {
                    // Yüksəltmə
                    button.textContent = 'Yüksəlt';
                    if (pName === 'Premium') {
                        button.classList.add('premium-button-1');
                    } else if (pName === 'Pro') {
                        button.classList.add('premium-button-2');
                    }
                }
            });
        }

        // Plan seçimi məntiqi (Simulyasiya)
        window.handlePlanSelection = async function(planName) {
            if (planName === currentPlan) {
                displayMessage(subscribeMessageEl, '✅ Bu sizin mövcud planınızdır.', false);
                return;
            }

            // Düymələri deaktiv et
            Object.values(planButtons).forEach(btn => btn.disabled = true);
            loadingSpinnerPlan.classList.remove('hidden');

            await new Promise(resolve => setTimeout(resolve, 1500)); // Gözləmə simulyasiyası
            
            // Düymələri yenidən aktiv et
            loadingSpinnerPlan.classList.add('hidden');
            
            try {
                let isSubscriptionActive;
                let message;

                const isUnsubscribing = (planName === 'Təməl');

                if (isUnsubscribing) {
                    message = '✅ Abunəliyiniz uğurla ləğv edildi. Təməl plana keçidiniz.';
                    isSubscriptionActive = false; 
                } else {
                    message = `✅ ${planName} Planına uğurla yüksəldiniz!`;
                    isSubscriptionActive = true; 
                }

                currentPlan = planName; 
                localStorage.setItem('currentPlan', planName);
                
                updateUI(document.getElementById('user-email').textContent, isSubscriptionActive, planName);
                displayMessage(subscribeMessageEl, message, false);

            } catch (error) {
                displayMessage(subscribeMessageEl, `❌ Xəta: ${error.message}`, true);
            }
        }
        
        // Məlumat çıxarışını simulyasiya edən funksiya
        window.handleLinkSearch = async function() {
            const url = document.getElementById('link-url').value.trim();
            if (!url) {
                displayMessage(searchMessageEl, "Zəhmət olmasa, video linkini daxil edin.", true);
                resultsEl.classList.add('hidden');
                return;
            }
            
            // Yüklənməni simulyasiya et
            displayMessage(searchMessageEl, `<i class="fas fa-spinner fa-spin mr-2"></i> Məlumat çıxarılır... Bu, planınıza görə 2-5 saniyə çəkə bilər.`, false);
            resultsEl.classList.add('hidden');

            // Simulyasiya gözləmə müddəti (Plan ilə əlaqəli)
            let waitTime = 2000; 
            if (currentPlan === 'Premium') waitTime = 1500;
            if (currentPlan === 'Pro') waitTime = 1000;
            
            await new Promise(resolve => setTimeout(resolve, waitTime));

            // Məlumatı plan səviyyəsinə uyğun çıxar
            const extractedData = generateMockData(url, currentPlan);
            renderResults(extractedData, currentPlan);
            
            displayMessage(searchMessageEl, `✅ Analiz tamamlandı! Nəticələr aşağıdadır.`, false);
        }

        // Mock data generation function (Azərbaycan dilində)
        function generateMockData(url, planName) {
            const isYouTube = url.includes('youtube.com') || url.includes('youtu.be');
            const source = isYouTube ? 'YouTube' : 'Generic Web Video';

            // 1. Təməl Məlumatlar (Bütün Planlar üçün)
            const baseData = {
                'Başlıq': "Azərbaycanın Gələcək Texnologiyaları və İnnovasiyaları",
                'Müddət': "12:45 dəqiqə",
                'Mənbə': source,
                'Yüklənmə Tarixi': "2024-10-23",
                'İzlənmə Sayı': "54,321",
                'Təsvir': "Bu video Azərbaycanda süni intellektin və blockchain texnologiyalarının tətbiqi, habelə startap ekosisteminin inkişafı haqqında ətraflı məlumat verir.",
                'Teqlər': ["Texnologiya", "Azərbaycan", "AI", "İnnovasiya"]
            };

            let extractedData = { ...baseData };

            if (planName === 'Təməl') {
                // Təməl plan məhdudiyyətləri
                extractedData['İzlənmə Sayı'] = "1,200 (Minimal Dəqiqlik)";
                extractedData['Teqlər'] = extractedData['Teqlər'].slice(0, 2);
                extractedData['Təsvir'] = extractedData['Təsvir'].substring(0, 70) + "... (Məzmun Kəsik)";
                extractedData['Məhdudiyyət'] = 'Daha ətraflı məlumat üçün Premium/Pro plana yüksəldin.';
                return extractedData;
            }

            if (planName === 'Premium' || planName === 'Pro') {
                // 2. Premium Xüsusiyyətlər
                extractedData['Transkript Hissəsi'] = "Video mətninin avtomatik çıxarılmış hissəsi: 'Salam, bu gün Azərbaycanın texnoloji gələcəyindən danışırıq. Süni intellektin tətbiqləri...'"
                extractedData['Tonun Təhlili'] = "Müsbət (92% - Yüksək Optimist)";
            }

            if (planName === 'Pro') {
                // 3. Pro Xüsusiyyətlər
                extractedData['Rəqib Analizi'] = "Ən yaxın 5 rəqib video analiz edildi (Yüksək prioritet)."
                extractedData['API Girişi'] = "Tam və dərhal API girişi aktivdir.";
                extractedData['Ətraflı Açar Sözlər'] = ["süni intellekt", "blockchain", "startap", "rəqəmsallaşma", "iqtisadiyyat"];
            }
            
            return extractedData;
        }


        // Nəticələri UI-da göstərən funksiya
        function renderResults(data, planName) {
            resultsContentEl.innerHTML = ''; // Köhnə nəticələri təmizlə
            resultsEl.classList.remove('hidden');

            // Plan xəbərdarlığını yenilə
            if (planName === 'Təməl' || planName === 'Premium') {
                planWarningEl.textContent = `${planName} Planı: Bəzi məlumatlar məhduddur.`;
                planWarningEl.classList.remove('hidden');
            } else {
                planWarningEl.textContent = 'Pro Plan: Bütün Məlumatlar Tamdır!';
                planWarningEl.classList.remove('hidden', 'bg-yellow-400', 'text-yellow-900');
                planWarningEl.classList.add('bg-green-500', 'text-white');
            }

            // Nəticələri grid-ə əlavə et
            for (const key in data) {
                if (data.hasOwnProperty(key)) {
                    const value = data[key];
                    
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'p-3 bg-white rounded-lg border border-gray-200';
                    
                    let keyClass = 'font-semibold text-gray-900';
                    let valueClass = 'mt-1 text-sm text-gray-600 break-words';
                    
                    // Pro xüsusiyyətlərini vurğula
                    if (planName === 'Pro' && (key === 'Rəqib Analizi' || key === 'API Girişi' || key === 'Ətraflı Açar Sözlər')) {
                         keyClass = 'font-extrabold text-purple-700';
                         valueClass = 'mt-1 text-sm text-purple-600 break-words';
                    }
                    // Premium xüsusiyyətlərini vurğula
                    if ((planName === 'Premium' || planName === 'Pro') && (key === 'Transkript Hissəsi' || key === 'Tonun Təhlili')) {
                         keyClass = 'font-extrabold text-blue-700';
                         valueClass = 'mt-1 text-sm text-blue-600 break-words';
                    }

                    itemDiv.innerHTML = `
                        <p class="${keyClass}">${key}</p>
                        <p class="${valueClass}">${value}</p>
                    `;
                    resultsContentEl.appendChild(itemDiv);
                }
            }
        }

        // Tətbiqi yükləyərkən UI-ı ilkin plana əsasən təyin et
        document.addEventListener('DOMContentLoaded', () => {
            const initialSubscriptionActive = currentPlan !== 'Təməl';
            updateUI(document.getElementById('user-email').textContent, initialSubscriptionActive, currentPlan);
        });

    </script>
</body>
</html>
